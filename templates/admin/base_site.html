<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Qu·∫£n l√Ω h·ªá th·ªëng</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'authentication/css/superuser_home.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <div class="header">
            <h1>Xin ch√†o, {{ request.user.username }}</h1>
            <p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi b·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n l√Ω</p>
            <div style="margin-top:1rem;">
              <a href="{% url 'home' %}" class="btn">üåê Xem website</a>   {# üëà n√∫t quay l·∫°i web #}
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Qu·∫£n l√Ω t√†i kho·∫£n -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="users"></i>
                        Qu·∫£n l√Ω t√†i kho·∫£n
                    </h2>
                    <button class="btn btn-primary" onclick="location.href='{% url 'user_create' %}'">
                        <i data-lucide="user-plus"></i>
                        Th√™m t√†i kho·∫£n m·ªõi
                    </button>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√™n ƒëƒÉng nh·∫≠p</th>
                                    <th>Email</th>
                                    <th>Superuser</th>
                                    <th>Nh√≥m</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for user in users %}
                                <tr>
                                    <td>{{ user.id }}</td>
                                    <td>{{ user.username }}</td>
                                    <td>{{ user.email }}</td>
                                    <td>{% if user.is_superuser %}‚úÖ{% else %}‚ùå{% endif %}</td>
                                    <td>
                                        {% for g in user.groups.all %}
                                            {{ g.name }}{% if not forloop.last %}, {% endif %}
                                        {% empty %}
                                            -
                                        {% endfor %}
                                    </td>
                                    <td>
                                        <a href="{% url 'user_update' user.id %}" class="btn btn-edit">S·ª≠a</a>
                                        <a href="{% url 'user_delete' user.id %}" class="btn btn-delete">Xo√°</a>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="6" class="empty-message">
                                        <i data-lucide="users" class="empty-icon"></i>
                                        <div class="empty-title">Ch∆∞a c√≥ t√†i kho·∫£n n√†o.</div>
                                        <div class="empty-text">B·∫Øt ƒë·∫ßu b·∫±ng c√°ch th√™m t√†i kho·∫£n ƒë·∫ßu ti√™n c·ªßa b·∫°n.</div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ph√¢n quy·ªÅn / Nh√≥m -->
            <div class="section groups-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="shield"></i>
                        Ph√¢n quy·ªÅn / Nh√≥m
                    </h2>
                    <button class="btn btn-primary" onclick="location.href='{% url 'group_create' %}'">
                        <i data-lucide="plus"></i>
                        T·∫°o nh√≥m m·ªõi
                    </button>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√™n nh√≥m</th>
                                    <th>Quy·ªÅn</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for group in groups %}
                                <tr>
                                    <td>{{ group.id }}</td>
                                    <td>{{ group.name }}</td>
                                    <td>
                                        {% for perm in group.permissions.all %}
                                            {{ perm.name }}{% if not forloop.last %}, {% endif %}
                                        {% empty %}
                                            -
                                        {% endfor %}
                                    </td>
                                    <td>
                                        <a href="{% url 'group_update' group.id %}" class="btn btn-edit">S·ª≠a</a>
                                        <a href="{% url 'group_delete' group.id %}" class="btn btn-delete">Xo√°</a>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="4" class="empty-message">
                                        <i data-lucide="shield" class="empty-icon"></i>
                                        <div class="empty-title">Ch∆∞a c√≥ nh√≥m n√†o.</div>
                                        <div class="empty-text">T·∫°o nh√≥m quy·ªÅn ƒë·ªÉ qu·∫£n l√Ω ph√¢n quy·ªÅn ng∆∞·ªùi d√πng.</div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Qu·∫£n l√Ω chuy√™n m·ª•c -->
            <div class="section categories-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-lucide="folder"></i>
                        Qu·∫£n l√Ω chuy√™n m·ª•c
                    </h2>
                    <button class="btn btn-primary" onclick="location.href='{% url 'category_create' %}'">
                        <i data-lucide="plus"></i>
                        Th√™m chuy√™n m·ª•c m·ªõi
                    </button>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√™n chuy√™n m·ª•c</th>
                                    <th>Slug</th>
                                    <th>M√¥ t·∫£</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for cat in categories %}
                                <tr>
                                    <td>{{ cat.id }}</td>
                                    <td>{{ cat.name }}</td>
                                    <td>{{ cat.slug }}</td>
                                    <td>{{ cat.description|default:"-" }}</td>
                                    <td>
                                        <a href="{% url 'category_update' cat.id %}" class="btn btn-edit">S·ª≠a</a>
                                        <a href="{% url 'category_delete' cat.id %}" class="btn btn-delete">Xo√°</a>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="5" class="empty-message">
                                        <i data-lucide="folder" class="empty-icon"></i>
                                        <div class="empty-title">Ch∆∞a c√≥ chuy√™n m·ª•c n√†o.</div>
                                        <div class="empty-text">B·∫Øt ƒë·∫ßu b·∫±ng c√°ch th√™m chuy√™n m·ª•c ƒë·∫ßu ti√™n c·ªßa b·∫°n.</div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>
