{% extends "core/base.html" %}
{% block title %}
  {% if category_mode %}
    {% if cat %}Sá»­a chuyÃªn má»¥c{% else %}ThÃªm chuyÃªn má»¥c{% endif %}
  {% else %}
    {% if a %}Sá»­a bÃ i{% else %}ÄÄƒng tin{% endif %}
  {% endif %}
{% endblock %}

{% block content %}
<div class="container">
  <div class="form-container">

    {% if category_mode %}
      <h2 style="margin-bottom: 2rem; color: #007bff;">
        {% if cat %}âœï¸ Sá»­a chuyÃªn má»¥c{% else %}ğŸ“ ThÃªm chuyÃªn má»¥c{% endif %}
      </h2>

      <form method="post">
        {% csrf_token %}
        <div class="form-group">
          <label for="title">TÃªn chuyÃªn má»¥c</label>
          <input type="text" id="title" name="title" value="{{ cat.name|default:'' }}" required>
        </div>

        <div class="form-group">
          <label for="short_desc">Slug</label>
          <input type="text" id="short_desc" name="short_desc" value="{{ cat.slug|default:'' }}" required>
        </div>

        <div class="form-group">
          <label for="content">MÃ´ táº£</label>
          <textarea id="content" name="content" rows="5">{{ cat.description|default:'' }}</textarea>
        </div>

        <div style="display:flex; gap:1rem;">
          <button type="submit" class="btn">ğŸ’¾ LÆ°u</button>
          <a href="{% url 'superuser_home' %}" class="btn" style="background:#6c757d;">âŒ Há»§y</a>
        </div>
      </form>

    {% else %}
      <h2 style="margin-bottom: 2rem; color: #007bff;">
        {% if a %}âœï¸ Sá»­a bÃ i{% else %}ğŸ“ ÄÄƒng tin má»›i{% endif %}
      </h2>

      <form method="post">
        {% csrf_token %}
        <div class="form-group">
          <label for="title">TiÃªu Ä‘á»</label>
          <input type="text" id="title" name="title" value="{{ a.title|default:'' }}" required>
        </div>

        <div class="form-group">
          <label for="short_desc">MÃ´ táº£ ngáº¯n</label>
          <input type="text" id="short_desc" name="short_desc" value="{{ a.short_desc|default:'' }}" maxlength="500" required>
        </div>

        <div class="form-group">
          <label for="content">Ná»™i dung</label>
          <textarea id="content" name="content" rows="10" required>{{ a.content|default:'' }}</textarea>
        </div>

        <div class="form-group">
          <label for="category_id">Danh má»¥c</label>
          <select id="category_id" name="category_id" required>
            {% for c in categories %}
              <option value="{{ c.id }}" {% if a and a.category_id == c.id %}selected{% endif %}>{{ c.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-group">
          <label for="published_at">NgÃ y Ä‘Äƒng</label>
          <input type="datetime-local" id="published_at" name="published_at"
                 value="{% if a %}{{ a.published_at|date:'Y-m-d\\TH:i' }}{% endif %}">
        </div>

        <div style="display:flex; gap:1rem;">
          <button type="submit" class="btn">ğŸ’¾ LÆ°u</button>
          <a href="{% url 'my_articles' %}" class="btn" style="background:#6c757d;">âŒ Há»§y</a>
        </div>
      </form>
    {% endif %}

  </div>
</div>
{% endblock %}
